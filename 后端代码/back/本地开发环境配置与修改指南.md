# 本地开发环境配置与需修改文件说明

---

## 1. 代码获取与目录结构

请先通过Git克隆或获取完整项目代码，目录结构如下：

```
/d:/yolo_test/
├── back/                # Spring Boot 后端主目录
├── yolov5-master/       # Flask + YOLOv5 检测服务
└── ...
```

---

## 2. 本地需修改的配置文件一览

| 文件路径 | 作用 | 需修改项 | 示例 |
|----------|------|----------|------|
| back/src/main/resources/application.yml | Spring Boot主配置 | 数据库连接、Flask服务地址、端口等 | 见下文 |
| yolov5-master/app.py 或 config.py | Flask服务配置 | 端口、模型目录、上传目录等 | 见下文 |
| yolov5-master/requirements.txt | Python依赖 | 如需特定版本可调整 | - |
| back/pom.xml | Java依赖 | 如需特定依赖版本可调整 | - |
| back/unmanned-inspection-system.sql | 数据库建表 | 如需自定义表名/字段 | - |

---

## 3. Spring Boot 配置文件（application.yml）

**路径**：`back/src/main/resources/application.yml`

**常见需修改项**：
- 数据库连接（url、username、password）
- Flask服务地址（flask.api.base-url）
- 服务端口（server.port）

**示例**：
```yaml
server:
  port: 8080
  servlet:
    context-path: /api

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/unmanned-inspection-system?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: 123456

flask:
  api:
    base-url: http://localhost:5000
```

---

## 4. Flask 配置（app.py/config.py）

**路径**：`yolov5-master/app.py` 或 `yolov5-master/config.py`

**常见需修改项**：
- 端口（如默认5000）
- 模型目录、上传目录、结果目录
- 允许的CORS来源

**示例片段**（app.py）：
```python
MODEL_FOLDER = 'model'          # 模型文件目录
UPLOAD_FOLDER = 'uploads'       # 上传文件目录
RESULTS_FOLDER = 'results'      # 检测结果目录

app.run(debug=True, host='0.0.0.0', port=5000)
```

---

## 5. 数据库配置与初始化

- 修改`application.yml`中的数据库连接信息，确保本地MySQL已创建对应数据库。
- 使用`back/unmanned-inspection-system.sql`初始化数据库结构。
- 如需自定义表名/字段，可在SQL文件中调整。

---

## 6. 依赖安装与环境变量

- **Python依赖**：`cd yolov5-master && pip install -r requirements.txt`
- **Java依赖**：`cd back && mvn install`
- **环境变量**：如需自定义端口、密钥等，可通过环境变量或配置文件覆盖。

---

## 7. 其他本地开发注意事项

- Windows与Linux/Mac均支持，注意路径分隔符差异。
- 如需GPU推理，需本地安装CUDA并配置好环境。
- 日志文件默认输出在`back/logs/`（Spring Boot），Flask日志为控制台输出。
- 前端如需本地联调，注意CORS跨域配置。
- 如有第三方API/密钥等敏感信息，建议用`.env`或本地配置文件管理，不要提交到Git。

---

## 8. 常见问题与排查

- **数据库连接失败**：检查`application.yml`数据库配置、MySQL服务状态。
- **Flask服务无法访问**：检查端口、防火墙、依赖安装。
- **模型/上传目录无权限**：确保相关目录有读写权限。
- **依赖冲突**：检查`requirements.txt`和`pom.xml`依赖版本。

---

如有更多本地开发环境问题，请联系项目维护者或查阅项目README。 